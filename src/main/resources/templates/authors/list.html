<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Authors</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

</head>
<body>
<h1> Authors </h1>

<h2>Add new author</h2>
<form th:method="POST" th:action="@{/authors}" th:object="${newAuthor}">
    <label for="firstName">Enter first name: </label>
    <input type="text" th:field="*{firstName}" id="firstName"/>
    <span style="color:red" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}">Name Error</span>
    <label for="lastName">Enter last name: </label>
    <input type="text" th:field="*{lastName}" id="lastName"/>
    <span style="color:red" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}">Name Error</span>
    <br/>
    <input type="submit" value="Create!"/>
</form>
<h3>Search author by last name</h3>
    <form th:method="POST" th:action="@{/authors/filter}">
    <input type="text" th:value = "${filter}" name ="filter"/>
    <br/>
    <input type="submit" value="Search"/>
</form>
<a th:href="@{/authors}"> Clear filter </a>

<h2>Author List</h2>
<table class="table">
    <tr>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
    <tr th:each="author : ${authors}">
        <td th:text="${author.firstName}"> 123</td>
        <td th:text="${author.lastName}"> 456</td>
        <td><a th:href="@{/authors/edit/{id}(id=${author.getId()})}">Edit</a></td>
        <td><a th:href="@{/authors/{id}/delete(id=${author.getId()})}">Delete</a></td>
    </tr>
</table>
<br/>


</body>
</html>